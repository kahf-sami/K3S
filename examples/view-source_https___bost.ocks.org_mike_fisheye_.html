
<!-- saved from url=(0035)https://bost.ocks.org/mike/fisheye/ -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></head><body><div class="line-gutter-backdrop"></div><table><tbody><tr><td class="line-number" value="1"></td><td class="line-content"><span class="html-doctype">&lt;!DOCTYPE html&gt;</span></td></tr><tr><td class="line-number" value="2"></td><td class="line-content"><span class="html-tag">&lt;html <span class="html-attribute-name">class</span>="<span class="html-attribute-value">ocks-org do-not-copy</span>"&gt;</span></td></tr><tr><td class="line-number" value="3"></td><td class="line-content"><span class="html-tag">&lt;meta <span class="html-attribute-name">charset</span>="<span class="html-attribute-value">utf-8</span>"&gt;</span></td></tr><tr><td class="line-number" value="4"></td><td class="line-content"><span class="html-tag">&lt;title&gt;</span>Fisheye Distortion<span class="html-tag">&lt;/title&gt;</span></td></tr><tr><td class="line-number" value="5"></td><td class="line-content"><span class="html-tag">&lt;style&gt;</span></td></tr><tr><td class="line-number" value="6"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="7"></td><td class="line-content">@import url(../style.css?aea6f0a);</td></tr><tr><td class="line-number" value="8"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="9"></td><td class="line-content">#chart1 {</td></tr><tr><td class="line-number" value="10"></td><td class="line-content">  width: 960px;</td></tr><tr><td class="line-number" value="11"></td><td class="line-content">  height: 500px;</td></tr><tr><td class="line-number" value="12"></td><td class="line-content">  border: solid 1px #ccc;</td></tr><tr><td class="line-number" value="13"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="14"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="15"></td><td class="line-content">text {</td></tr><tr><td class="line-number" value="16"></td><td class="line-content">  font: 10px sans-serif;</td></tr><tr><td class="line-number" value="17"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="18"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="19"></td><td class="line-content">.background {</td></tr><tr><td class="line-number" value="20"></td><td class="line-content">  fill: none;</td></tr><tr><td class="line-number" value="21"></td><td class="line-content">  pointer-events: all;</td></tr><tr><td class="line-number" value="22"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="23"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="24"></td><td class="line-content">#chart1 .node {</td></tr><tr><td class="line-number" value="25"></td><td class="line-content">  stroke: #fff;</td></tr><tr><td class="line-number" value="26"></td><td class="line-content">  stroke-width: 1.5px;</td></tr><tr><td class="line-number" value="27"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="28"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="29"></td><td class="line-content">#chart1 .link {</td></tr><tr><td class="line-number" value="30"></td><td class="line-content">  stroke: #999;</td></tr><tr><td class="line-number" value="31"></td><td class="line-content">  stroke-opacity: .6;</td></tr><tr><td class="line-number" value="32"></td><td class="line-content">  stroke-width: 1.5px;</td></tr><tr><td class="line-number" value="33"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="34"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="35"></td><td class="line-content">#chart2, #chart3 {</td></tr><tr><td class="line-number" value="36"></td><td class="line-content">  width: 960px;</td></tr><tr><td class="line-number" value="37"></td><td class="line-content">  height: 180px;</td></tr><tr><td class="line-number" value="38"></td><td class="line-content">  border: solid 1px #ccc;</td></tr><tr><td class="line-number" value="39"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="40"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="41"></td><td class="line-content">#chart2 path, #chart3 line {</td></tr><tr><td class="line-number" value="42"></td><td class="line-content">  fill: none;</td></tr><tr><td class="line-number" value="43"></td><td class="line-content">  stroke: #333;</td></tr><tr><td class="line-number" value="44"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="45"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="46"></td><td class="line-content">#chart3 line {</td></tr><tr><td class="line-number" value="47"></td><td class="line-content">  shape-rendering: crispEdges;</td></tr><tr><td class="line-number" value="48"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="49"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="50"></td><td class="line-content">#chart4 {</td></tr><tr><td class="line-number" value="51"></td><td class="line-content">  margin-left: -40px;</td></tr><tr><td class="line-number" value="52"></td><td class="line-content">  height: 506px;</td></tr><tr><td class="line-number" value="53"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="54"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="55"></td><td class="line-content">#chart4 .background {</td></tr><tr><td class="line-number" value="56"></td><td class="line-content">  fill: #ddd;</td></tr><tr><td class="line-number" value="57"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="58"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="59"></td><td class="line-content">#chart4 .dot {</td></tr><tr><td class="line-number" value="60"></td><td class="line-content">  stroke: #000;</td></tr><tr><td class="line-number" value="61"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="62"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="63"></td><td class="line-content">.axis path, .axis line {</td></tr><tr><td class="line-number" value="64"></td><td class="line-content">  fill: none;</td></tr><tr><td class="line-number" value="65"></td><td class="line-content">  stroke: #fff;</td></tr><tr><td class="line-number" value="66"></td><td class="line-content">  shape-rendering: crispEdges;</td></tr><tr><td class="line-number" value="67"></td><td class="line-content">}</td></tr><tr><td class="line-number" value="68"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="69"></td><td class="line-content"><span class="html-tag">&lt;/style&gt;</span></td></tr><tr><td class="line-number" value="70"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="71"></td><td class="line-content"><span class="html-tag">&lt;header&gt;</span></td></tr><tr><td class="line-number" value="72"></td><td class="line-content">  <span class="html-tag">&lt;aside&gt;</span>June 21, 2012<span class="html-tag">&lt;/aside&gt;</span></td></tr><tr><td class="line-number" value="73"></td><td class="line-content">  <span class="html-tag">&lt;a <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://bost.ocks.org/mike/">../</a>" <span class="html-attribute-name">rel</span>="<span class="html-attribute-value">author</span>"&gt;</span>Mike Bostock<span class="html-tag">&lt;/a&gt;</span></td></tr><tr><td class="line-number" value="74"></td><td class="line-content"><span class="html-tag">&lt;/header&gt;</span></td></tr><tr><td class="line-number" value="75"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="76"></td><td class="line-content"><span class="html-tag">&lt;h1&gt;</span>Fisheye Distortion<span class="html-tag">&lt;/h1&gt;</span></td></tr><tr><td class="line-number" value="77"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="78"></td><td class="line-content"><span class="html-tag">&lt;p <span class="html-attribute-name">id</span>="<span class="html-attribute-value">chart1</span>"&gt;</span></td></tr><tr><td class="line-number" value="79"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="80"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span><span class="html-tag">&lt;aside&gt;</span>Mouseover to distort the nodes.<span class="html-tag">&lt;/aside&gt;</span></td></tr><tr><td class="line-number" value="81"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="82"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span>It can be difficult to observe micro and macro features simultaneously with complex graphs. If you zoom in for detail, the graph is too big to view in its entirety. If you zoom out to see the overall structure, small details are lost. <span class="html-tag">&lt;a <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="http://www.infovis-wiki.net/index.php/Focus-plus-Context">http://www.infovis-wiki.net/index.php/Focus-plus-Context</a>"&gt;</span>Focus + context<span class="html-tag">&lt;/a&gt;</span> techniques allow interactive exploration of an area of interest (the <span class="html-tag">&lt;i&gt;</span>focus<span class="html-tag">&lt;/i&gt;</span>) in greater detail, while preserving the surrounding environment (the <span class="html-tag">&lt;i&gt;</span>context<span class="html-tag">&lt;/i&gt;</span>).</td></tr><tr><td class="line-number" value="83"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="84"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span>In the graph above, <span class="html-tag">&lt;b&gt;</span>fisheye distortion<span class="html-tag">&lt;/b&gt;</span> magnifies the local region around the mouse, while leaving the larger graph unaffected for context. The localized, circular nature of the distortion can be seen clearly by applying it to a uniform grid:</td></tr><tr><td class="line-number" value="85"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="86"></td><td class="line-content"><span class="html-tag">&lt;p <span class="html-attribute-name">id</span>="<span class="html-attribute-value">chart2</span>"&gt;</span></td></tr><tr><td class="line-number" value="87"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="88"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span>This type of distortion is particularly useful for disambiguating edge-crossings in static network layouts: edges between distant nodes are distorted more strongly than local ones. If you dislike the chaotic appearance of <span class="html-tag">&lt;a <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="http://mbostock.github.com/d3/ex/force.html">http://mbostock.github.com/d3/ex/force.html</a>"&gt;</span>dynamic force layout<span class="html-tag">&lt;/a&gt;</span>, consider using distortion instead.</td></tr><tr><td class="line-number" value="89"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="90"></td><td class="line-content"><span class="html-tag">&lt;aside&gt;</span>For more network diagrams, see my posts on <span class="html-tag">&lt;a <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://bost.ocks.org/mike/miserables/">../miserables/</a>"&gt;</span>matrix diagrams<span class="html-tag">&lt;/a&gt;</span>, <span class="html-tag">&lt;a <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://bost.ocks.org/mike/hive/">../hive/</a>"&gt;</span>hive plots<span class="html-tag">&lt;/a&gt;</span> and <span class="html-tag">&lt;a <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://bost.ocks.org/mike/uberdata/">../uberdata/</a>"&gt;</span>chord diagrams<span class="html-tag">&lt;/a&gt;</span>.<span class="html-tag">&lt;/aside&gt;</span></td></tr><tr><td class="line-number" value="91"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="92"></td><td class="line-content"><span class="html-tag">&lt;h2&gt;</span><span class="html-tag">&lt;a <span class="html-attribute-name">name</span>="<span class="html-attribute-value">cartesian</span>" <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://bost.ocks.org/mike/fisheye/#cartesian">#cartesian</a>"&gt;</span>#<span class="html-tag">&lt;/a&gt;</span>Cartesian Distortion<span class="html-tag">&lt;/h2&gt;</span></td></tr><tr><td class="line-number" value="93"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="94"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span>Circular fisheye is only one of many possible distortion functions. Two disadvantages of circular distortion are that it compresses (rather than magnifies) the area near the circumference of the circle, and that it requires curved grid lines to show the distortion accurately. The latter makes it unsuitable for visualizations that have quantitative position encodings, such as scatterplots.</td></tr><tr><td class="line-number" value="95"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="96"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span><span class="html-tag">&lt;a <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="http://dl.acm.org/citation.cfm?id=142763">http://dl.acm.org/citation.cfm?id=142763</a>"&gt;</span>Sarkar and Brown<span class="html-tag">&lt;/a&gt;</span> therefore recommend a different function that magnifies continuously so as to avoid local minification. Furthermore, they demonstrate applying the distortion to each dimension separately, resulting in <span class="html-tag">&lt;i&gt;</span>Cartesian distortion<span class="html-tag">&lt;/i&gt;</span>:</td></tr><tr><td class="line-number" value="97"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="98"></td><td class="line-content"><span class="html-tag">&lt;p <span class="html-attribute-name">id</span>="<span class="html-attribute-value">chart3</span>"&gt;</span></td></tr><tr><td class="line-number" value="99"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="100"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span>With this technique, straight lines parallel to the <span class="html-tag">&lt;i&gt;</span>x<span class="html-tag">&lt;/i&gt;</span> or <span class="html-tag">&lt;i&gt;</span>y<span class="html-tag">&lt;/i&gt;</span> axis remain straight even after distortion. This means you can use standard axes in conjunction with fisheye distortion in scatterplots:</td></tr><tr><td class="line-number" value="101"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="102"></td><td class="line-content"><span class="html-tag">&lt;p <span class="html-attribute-name">id</span>="<span class="html-attribute-value">chart4</span>"&gt;</span></td></tr><tr><td class="line-number" value="103"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="104"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span>Fisheye distortion allows you to zoom into small areas of the chart without losing sense of the overall distribution. For example, the Western European countries (purple) are densely clustered in the <span class="html-tag">&lt;a <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://bost.ocks.org/mike/nations/">../nations/</a>"&gt;</span>original chart<span class="html-tag">&lt;/a&gt;</span>, making them difficult to compare; with distortion, you can easily differentiate individual countries while retaining global context and comparing regions.</td></tr><tr><td class="line-number" value="105"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="106"></td><td class="line-content"><span class="html-tag">&lt;h2&gt;</span><span class="html-tag">&lt;a <span class="html-attribute-name">name</span>="<span class="html-attribute-value">implementation</span>" <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://bost.ocks.org/mike/fisheye/#implementation">#implementation</a>"&gt;</span>#<span class="html-tag">&lt;/a&gt;</span>Implementation<span class="html-tag">&lt;/h2&gt;</span></td></tr><tr><td class="line-number" value="107"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="108"></td><td class="line-content"><span class="html-tag">&lt;p&gt;</span>These examples use D3’s <span class="html-tag">&lt;a <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://github.com/d3/d3-plugins/tree/master/fisheye">https://github.com/d3/d3-plugins/tree/master/fisheye</a>"&gt;</span>fisheye plugin<span class="html-tag">&lt;/a&gt;</span>, which supports both circular and Cartesian distortion. The latter is implemented on top of D3’s <span class="html-tag">&lt;a <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://github.com/mbostock/d3/wiki/Quantitative-Scales">https://github.com/mbostock/d3/wiki/Quantitative-Scales</a>"&gt;</span>quantitative scales<span class="html-tag">&lt;/a&gt;</span>, allowing distortion of linear, logarithmic, and exponential scales, as well as compatibility with D3’s <span class="html-tag">&lt;a <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://github.com/mbostock/d3/wiki/SVG-Axes">https://github.com/mbostock/d3/wiki/SVG-Axes</a>"&gt;</span>axis component<span class="html-tag">&lt;/a&gt;</span>. For additional implementations, see <span class="html-tag">&lt;a <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="http://flare.prefuse.org/">http://flare.prefuse.org</a>"&gt;</span>Flare<span class="html-tag">&lt;/a&gt;</span> and <span class="html-tag">&lt;a <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="http://sigmajs.org/">http://sigmajs.org</a>"&gt;</span>Sigma.js<span class="html-tag">&lt;/a&gt;</span>.</td></tr><tr><td class="line-number" value="109"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="110"></td><td class="line-content"><span class="html-tag">&lt;footer&gt;</span></td></tr><tr><td class="line-number" value="111"></td><td class="line-content">  <span class="html-tag">&lt;aside&gt;</span>June 21, 2012<span class="html-tag">&lt;/aside&gt;</span></td></tr><tr><td class="line-number" value="112"></td><td class="line-content">  <span class="html-tag">&lt;a <span class="html-attribute-name">href</span>="<a class="html-attribute-value html-external-link" target="_blank" href="https://bost.ocks.org/mike/">../</a>" <span class="html-attribute-name">rel</span>="<span class="html-attribute-value">author</span>"&gt;</span>Mike Bostock<span class="html-tag">&lt;/a&gt;</span></td></tr><tr><td class="line-number" value="113"></td><td class="line-content"><span class="html-tag">&lt;/footer&gt;</span></td></tr><tr><td class="line-number" value="114"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="115"></td><td class="line-content"><span class="html-tag">&lt;script <span class="html-attribute-name">src</span>="<a class="html-attribute-value html-resource-link" target="_blank" href="https://d3js.org/d3.v2.min.js">//d3js.org/d3.v2.min.js</a>" <span class="html-attribute-name">charset</span>="<span class="html-attribute-value">utf-8</span>"&gt;</span><span class="html-tag">&lt;/script&gt;</span></td></tr><tr><td class="line-number" value="116"></td><td class="line-content"><span class="html-tag">&lt;script <span class="html-attribute-name">src</span>="<a class="html-attribute-value html-resource-link" target="_blank" href="https://bost.ocks.org/mike/fisheye/fisheye.js">fisheye.js</a>"&gt;</span><span class="html-tag">&lt;/script&gt;</span></td></tr><tr><td class="line-number" value="117"></td><td class="line-content"><span class="html-tag">&lt;script&gt;</span></td></tr><tr><td class="line-number" value="118"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="119"></td><td class="line-content">(function chart1() {</td></tr><tr><td class="line-number" value="120"></td><td class="line-content">  var width = 960,</td></tr><tr><td class="line-number" value="121"></td><td class="line-content">      height = 500;</td></tr><tr><td class="line-number" value="122"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="123"></td><td class="line-content">  var color = d3.scale.category20();</td></tr><tr><td class="line-number" value="124"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="125"></td><td class="line-content">  var fisheye = d3.fisheye.circular()</td></tr><tr><td class="line-number" value="126"></td><td class="line-content">      .radius(120);</td></tr><tr><td class="line-number" value="127"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="128"></td><td class="line-content">  var force = d3.layout.force()</td></tr><tr><td class="line-number" value="129"></td><td class="line-content">      .charge(-240)</td></tr><tr><td class="line-number" value="130"></td><td class="line-content">      .linkDistance(40)</td></tr><tr><td class="line-number" value="131"></td><td class="line-content">      .size([width, height]);</td></tr><tr><td class="line-number" value="132"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="133"></td><td class="line-content">  var svg = d3.select("#chart1").append("svg")</td></tr><tr><td class="line-number" value="134"></td><td class="line-content">      .attr("width", width)</td></tr><tr><td class="line-number" value="135"></td><td class="line-content">      .attr("height", height);</td></tr><tr><td class="line-number" value="136"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="137"></td><td class="line-content">  svg.append("rect")</td></tr><tr><td class="line-number" value="138"></td><td class="line-content">      .attr("class", "background")</td></tr><tr><td class="line-number" value="139"></td><td class="line-content">      .attr("width", width)</td></tr><tr><td class="line-number" value="140"></td><td class="line-content">      .attr("height", height);</td></tr><tr><td class="line-number" value="141"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="142"></td><td class="line-content">  d3.json("miserables.json", function(data) {</td></tr><tr><td class="line-number" value="143"></td><td class="line-content">    var n = data.nodes.length;</td></tr><tr><td class="line-number" value="144"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="145"></td><td class="line-content">    force.nodes(data.nodes).links(data.links);</td></tr><tr><td class="line-number" value="146"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="147"></td><td class="line-content">    // Initialize the positions deterministically, for better results.</td></tr><tr><td class="line-number" value="148"></td><td class="line-content">    data.nodes.forEach(function(d, i) { d.x = d.y = width / n * i; });</td></tr><tr><td class="line-number" value="149"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="150"></td><td class="line-content">    // Run the layout a fixed number of times.</td></tr><tr><td class="line-number" value="151"></td><td class="line-content">    // The ideal number of times scales with graph complexity.</td></tr><tr><td class="line-number" value="152"></td><td class="line-content">    // Of course, don't run too long—you'll hang the page!</td></tr><tr><td class="line-number" value="153"></td><td class="line-content">    force.start();</td></tr><tr><td class="line-number" value="154"></td><td class="line-content">    for (var i = n; i &gt; 0; --i) force.tick();</td></tr><tr><td class="line-number" value="155"></td><td class="line-content">    force.stop();</td></tr><tr><td class="line-number" value="156"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="157"></td><td class="line-content">    // Center the nodes in the middle.</td></tr><tr><td class="line-number" value="158"></td><td class="line-content">    var ox = 0, oy = 0;</td></tr><tr><td class="line-number" value="159"></td><td class="line-content">    data.nodes.forEach(function(d) { ox += d.x, oy += d.y; });</td></tr><tr><td class="line-number" value="160"></td><td class="line-content">    ox = ox / n - width / 2, oy = oy / n - height / 2;</td></tr><tr><td class="line-number" value="161"></td><td class="line-content">    data.nodes.forEach(function(d) { d.x -= ox, d.y -= oy; });</td></tr><tr><td class="line-number" value="162"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="163"></td><td class="line-content">    var link = svg.selectAll(".link")</td></tr><tr><td class="line-number" value="164"></td><td class="line-content">        .data(data.links)</td></tr><tr><td class="line-number" value="165"></td><td class="line-content">      .enter().append("line")</td></tr><tr><td class="line-number" value="166"></td><td class="line-content">        .attr("class", "link")</td></tr><tr><td class="line-number" value="167"></td><td class="line-content">        .attr("x1", function(d) { return d.source.x; })</td></tr><tr><td class="line-number" value="168"></td><td class="line-content">        .attr("y1", function(d) { return d.source.y; })</td></tr><tr><td class="line-number" value="169"></td><td class="line-content">        .attr("x2", function(d) { return d.target.x; })</td></tr><tr><td class="line-number" value="170"></td><td class="line-content">        .attr("y2", function(d) { return d.target.y; })</td></tr><tr><td class="line-number" value="171"></td><td class="line-content">        .style("stroke-width", function(d) { return Math.sqrt(d.value); });</td></tr><tr><td class="line-number" value="172"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="173"></td><td class="line-content">    var node = svg.selectAll(".node")</td></tr><tr><td class="line-number" value="174"></td><td class="line-content">        .data(data.nodes)</td></tr><tr><td class="line-number" value="175"></td><td class="line-content">      .enter().append("circle")</td></tr><tr><td class="line-number" value="176"></td><td class="line-content">        .attr("class", "node")</td></tr><tr><td class="line-number" value="177"></td><td class="line-content">        .attr("cx", function(d) { return d.x; })</td></tr><tr><td class="line-number" value="178"></td><td class="line-content">        .attr("cy", function(d) { return d.y; })</td></tr><tr><td class="line-number" value="179"></td><td class="line-content">        .attr("r", 4.5)</td></tr><tr><td class="line-number" value="180"></td><td class="line-content">        .style("fill", function(d) { return color(d.group); })</td></tr><tr><td class="line-number" value="181"></td><td class="line-content">        .call(force.drag);</td></tr><tr><td class="line-number" value="182"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="183"></td><td class="line-content">    svg.on("mousemove", function() {</td></tr><tr><td class="line-number" value="184"></td><td class="line-content">      fisheye.focus(d3.mouse(this));</td></tr><tr><td class="line-number" value="185"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="186"></td><td class="line-content">      node.each(function(d) { d.fisheye = fisheye(d); })</td></tr><tr><td class="line-number" value="187"></td><td class="line-content">          .attr("cx", function(d) { return d.fisheye.x; })</td></tr><tr><td class="line-number" value="188"></td><td class="line-content">          .attr("cy", function(d) { return d.fisheye.y; })</td></tr><tr><td class="line-number" value="189"></td><td class="line-content">          .attr("r", function(d) { return d.fisheye.z * 4.5; });</td></tr><tr><td class="line-number" value="190"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="191"></td><td class="line-content">      link.attr("x1", function(d) { return d.source.fisheye.x; })</td></tr><tr><td class="line-number" value="192"></td><td class="line-content">          .attr("y1", function(d) { return d.source.fisheye.y; })</td></tr><tr><td class="line-number" value="193"></td><td class="line-content">          .attr("x2", function(d) { return d.target.fisheye.x; })</td></tr><tr><td class="line-number" value="194"></td><td class="line-content">          .attr("y2", function(d) { return d.target.fisheye.y; });</td></tr><tr><td class="line-number" value="195"></td><td class="line-content">    });</td></tr><tr><td class="line-number" value="196"></td><td class="line-content">  });</td></tr><tr><td class="line-number" value="197"></td><td class="line-content">})();</td></tr><tr><td class="line-number" value="198"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="199"></td><td class="line-content">(function chart2() {</td></tr><tr><td class="line-number" value="200"></td><td class="line-content">  var width = 960,</td></tr><tr><td class="line-number" value="201"></td><td class="line-content">      height = 180,</td></tr><tr><td class="line-number" value="202"></td><td class="line-content">      xStepsBig = d3.range(10, width, 16),</td></tr><tr><td class="line-number" value="203"></td><td class="line-content">      yStepsBig = d3.range(10, height, 16),</td></tr><tr><td class="line-number" value="204"></td><td class="line-content">      xStepsSmall = d3.range(0, width + 6, 6),</td></tr><tr><td class="line-number" value="205"></td><td class="line-content">      yStepsSmall = d3.range(0, height + 6, 6);</td></tr><tr><td class="line-number" value="206"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="207"></td><td class="line-content">  var fisheye = d3.fisheye.circular()</td></tr><tr><td class="line-number" value="208"></td><td class="line-content">      .focus([360, 90])</td></tr><tr><td class="line-number" value="209"></td><td class="line-content">      .radius(100);</td></tr><tr><td class="line-number" value="210"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="211"></td><td class="line-content">  var line = d3.svg.line();</td></tr><tr><td class="line-number" value="212"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="213"></td><td class="line-content">  var svg = d3.select("#chart2").append("svg")</td></tr><tr><td class="line-number" value="214"></td><td class="line-content">      .attr("width", width)</td></tr><tr><td class="line-number" value="215"></td><td class="line-content">      .attr("height", height)</td></tr><tr><td class="line-number" value="216"></td><td class="line-content">    .append("g")</td></tr><tr><td class="line-number" value="217"></td><td class="line-content">      .attr("transform", "translate(-.5,-.5)");</td></tr><tr><td class="line-number" value="218"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="219"></td><td class="line-content">  svg.append("rect")</td></tr><tr><td class="line-number" value="220"></td><td class="line-content">      .attr("class", "background")</td></tr><tr><td class="line-number" value="221"></td><td class="line-content">      .attr("width", width)</td></tr><tr><td class="line-number" value="222"></td><td class="line-content">      .attr("height", height);</td></tr><tr><td class="line-number" value="223"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="224"></td><td class="line-content">  svg.selectAll(".x")</td></tr><tr><td class="line-number" value="225"></td><td class="line-content">      .data(xStepsBig)</td></tr><tr><td class="line-number" value="226"></td><td class="line-content">    .enter().append("path")</td></tr><tr><td class="line-number" value="227"></td><td class="line-content">      .attr("class", "x")</td></tr><tr><td class="line-number" value="228"></td><td class="line-content">      .datum(function(x) { return yStepsSmall.map(function(y) { return [x, y]; }); });</td></tr><tr><td class="line-number" value="229"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="230"></td><td class="line-content">  svg.selectAll(".y")</td></tr><tr><td class="line-number" value="231"></td><td class="line-content">      .data(yStepsBig)</td></tr><tr><td class="line-number" value="232"></td><td class="line-content">    .enter().append("path")</td></tr><tr><td class="line-number" value="233"></td><td class="line-content">      .attr("class", "y")</td></tr><tr><td class="line-number" value="234"></td><td class="line-content">      .datum(function(y) { return xStepsSmall.map(function(x) { return [x, y]; }); });</td></tr><tr><td class="line-number" value="235"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="236"></td><td class="line-content">  var path = svg.selectAll("path")</td></tr><tr><td class="line-number" value="237"></td><td class="line-content">      .attr("d", fishline);</td></tr><tr><td class="line-number" value="238"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="239"></td><td class="line-content">  svg.on("mousemove", function() {</td></tr><tr><td class="line-number" value="240"></td><td class="line-content">    fisheye.focus(d3.mouse(this));</td></tr><tr><td class="line-number" value="241"></td><td class="line-content">    path.attr("d", fishline);</td></tr><tr><td class="line-number" value="242"></td><td class="line-content">  });</td></tr><tr><td class="line-number" value="243"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="244"></td><td class="line-content">  function fishline(d) {</td></tr><tr><td class="line-number" value="245"></td><td class="line-content">    return line(d.map(function(d) {</td></tr><tr><td class="line-number" value="246"></td><td class="line-content">      d = fisheye({x: d[0], y: d[1]});</td></tr><tr><td class="line-number" value="247"></td><td class="line-content">      return [d.x, d.y];</td></tr><tr><td class="line-number" value="248"></td><td class="line-content">    }));</td></tr><tr><td class="line-number" value="249"></td><td class="line-content">  }</td></tr><tr><td class="line-number" value="250"></td><td class="line-content">})();</td></tr><tr><td class="line-number" value="251"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="252"></td><td class="line-content">(function chart3() {</td></tr><tr><td class="line-number" value="253"></td><td class="line-content">  var width = 960,</td></tr><tr><td class="line-number" value="254"></td><td class="line-content">      height = 180,</td></tr><tr><td class="line-number" value="255"></td><td class="line-content">      xSteps = d3.range(10, width, 16),</td></tr><tr><td class="line-number" value="256"></td><td class="line-content">      ySteps = d3.range(10, height, 16);</td></tr><tr><td class="line-number" value="257"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="258"></td><td class="line-content">  var xFisheye = d3.fisheye.scale(d3.scale.identity).domain([0, width]).focus(360),</td></tr><tr><td class="line-number" value="259"></td><td class="line-content">      yFisheye = d3.fisheye.scale(d3.scale.identity).domain([0, height]).focus(90);</td></tr><tr><td class="line-number" value="260"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="261"></td><td class="line-content">  var svg = d3.select("#chart3").append("svg")</td></tr><tr><td class="line-number" value="262"></td><td class="line-content">      .attr("width", width)</td></tr><tr><td class="line-number" value="263"></td><td class="line-content">      .attr("height", height)</td></tr><tr><td class="line-number" value="264"></td><td class="line-content">    .append("g")</td></tr><tr><td class="line-number" value="265"></td><td class="line-content">      .attr("transform", "translate(-.5,-.5)");</td></tr><tr><td class="line-number" value="266"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="267"></td><td class="line-content">  svg.append("rect")</td></tr><tr><td class="line-number" value="268"></td><td class="line-content">      .attr("class", "background")</td></tr><tr><td class="line-number" value="269"></td><td class="line-content">      .attr("width", width)</td></tr><tr><td class="line-number" value="270"></td><td class="line-content">      .attr("height", height);</td></tr><tr><td class="line-number" value="271"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="272"></td><td class="line-content">  var xLine = svg.selectAll(".x")</td></tr><tr><td class="line-number" value="273"></td><td class="line-content">      .data(xSteps)</td></tr><tr><td class="line-number" value="274"></td><td class="line-content">    .enter().append("line")</td></tr><tr><td class="line-number" value="275"></td><td class="line-content">      .attr("class", "x")</td></tr><tr><td class="line-number" value="276"></td><td class="line-content">      .attr("y2", height);</td></tr><tr><td class="line-number" value="277"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="278"></td><td class="line-content">  var yLine = svg.selectAll(".y")</td></tr><tr><td class="line-number" value="279"></td><td class="line-content">      .data(ySteps)</td></tr><tr><td class="line-number" value="280"></td><td class="line-content">    .enter().append("line")</td></tr><tr><td class="line-number" value="281"></td><td class="line-content">      .attr("class", "y")</td></tr><tr><td class="line-number" value="282"></td><td class="line-content">      .attr("x2", width);</td></tr><tr><td class="line-number" value="283"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="284"></td><td class="line-content">  redraw();</td></tr><tr><td class="line-number" value="285"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="286"></td><td class="line-content">  svg.on("mousemove", function() {</td></tr><tr><td class="line-number" value="287"></td><td class="line-content">    var mouse = d3.mouse(this);</td></tr><tr><td class="line-number" value="288"></td><td class="line-content">    xFisheye.focus(mouse[0]);</td></tr><tr><td class="line-number" value="289"></td><td class="line-content">    yFisheye.focus(mouse[1]);</td></tr><tr><td class="line-number" value="290"></td><td class="line-content">    redraw();</td></tr><tr><td class="line-number" value="291"></td><td class="line-content">  });</td></tr><tr><td class="line-number" value="292"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="293"></td><td class="line-content">  function redraw() {</td></tr><tr><td class="line-number" value="294"></td><td class="line-content">    xLine.attr("x1", xFisheye).attr("x2", xFisheye);</td></tr><tr><td class="line-number" value="295"></td><td class="line-content">    yLine.attr("y1", yFisheye).attr("y2", yFisheye);</td></tr><tr><td class="line-number" value="296"></td><td class="line-content">  }</td></tr><tr><td class="line-number" value="297"></td><td class="line-content">})();</td></tr><tr><td class="line-number" value="298"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="299"></td><td class="line-content">(function chart4() {</td></tr><tr><td class="line-number" value="300"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="301"></td><td class="line-content">  // Various accessors that specify the four dimensions of data to visualize.</td></tr><tr><td class="line-number" value="302"></td><td class="line-content">  function x(d) { return d.income; }</td></tr><tr><td class="line-number" value="303"></td><td class="line-content">  function y(d) { return d.lifeExpectancy; }</td></tr><tr><td class="line-number" value="304"></td><td class="line-content">  function radius(d) { return d.population; }</td></tr><tr><td class="line-number" value="305"></td><td class="line-content">  function color(d) { return d.region; }</td></tr><tr><td class="line-number" value="306"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="307"></td><td class="line-content">  // Chart dimensions.</td></tr><tr><td class="line-number" value="308"></td><td class="line-content">  var margin = {top: 5.5, right: 19.5, bottom: 12.5, left: 39.5},</td></tr><tr><td class="line-number" value="309"></td><td class="line-content">      width = 960,</td></tr><tr><td class="line-number" value="310"></td><td class="line-content">      height = 500 - margin.top - margin.bottom;</td></tr><tr><td class="line-number" value="311"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="312"></td><td class="line-content">  // Various scales and distortions.</td></tr><tr><td class="line-number" value="313"></td><td class="line-content">  var xScale = d3.fisheye.scale(d3.scale.log).domain([300, 1e5]).range([0, width]),</td></tr><tr><td class="line-number" value="314"></td><td class="line-content">      yScale = d3.fisheye.scale(d3.scale.linear).domain([20, 90]).range([height, 0]),</td></tr><tr><td class="line-number" value="315"></td><td class="line-content">      radiusScale = d3.scale.sqrt().domain([0, 5e8]).range([0, 40]),</td></tr><tr><td class="line-number" value="316"></td><td class="line-content">      colorScale = d3.scale.category10().domain(["Sub-Saharan Africa", "South Asia", "Middle East &amp; North Africa", "America", "Europe &amp; Central Asia", "East Asia &amp; Pacific"]);</td></tr><tr><td class="line-number" value="317"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="318"></td><td class="line-content">  // The x &amp; y axes.</td></tr><tr><td class="line-number" value="319"></td><td class="line-content">  var xAxis = d3.svg.axis().orient("bottom").scale(xScale).tickFormat(d3.format(",d")).tickSize(-height),</td></tr><tr><td class="line-number" value="320"></td><td class="line-content">      yAxis = d3.svg.axis().scale(yScale).orient("left").tickSize(-width);</td></tr><tr><td class="line-number" value="321"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="322"></td><td class="line-content">  // Create the SVG container and set the origin.</td></tr><tr><td class="line-number" value="323"></td><td class="line-content">  var svg = d3.select("#chart4").append("svg")</td></tr><tr><td class="line-number" value="324"></td><td class="line-content">      .attr("width", width + margin.left + margin.right)</td></tr><tr><td class="line-number" value="325"></td><td class="line-content">      .attr("height", height + margin.top + margin.bottom)</td></tr><tr><td class="line-number" value="326"></td><td class="line-content">    .append("g")</td></tr><tr><td class="line-number" value="327"></td><td class="line-content">      .attr("transform", "translate(" + margin.left + "," + margin.top + ")");</td></tr><tr><td class="line-number" value="328"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="329"></td><td class="line-content">  // Add a background rect for mousemove.</td></tr><tr><td class="line-number" value="330"></td><td class="line-content">  svg.append("rect")</td></tr><tr><td class="line-number" value="331"></td><td class="line-content">      .attr("class", "background")</td></tr><tr><td class="line-number" value="332"></td><td class="line-content">      .attr("width", width)</td></tr><tr><td class="line-number" value="333"></td><td class="line-content">      .attr("height", height);</td></tr><tr><td class="line-number" value="334"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="335"></td><td class="line-content">  // Add the x-axis.</td></tr><tr><td class="line-number" value="336"></td><td class="line-content">  svg.append("g")</td></tr><tr><td class="line-number" value="337"></td><td class="line-content">      .attr("class", "x axis")</td></tr><tr><td class="line-number" value="338"></td><td class="line-content">      .attr("transform", "translate(0," + height + ")")</td></tr><tr><td class="line-number" value="339"></td><td class="line-content">      .call(xAxis);</td></tr><tr><td class="line-number" value="340"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="341"></td><td class="line-content">  // Add the y-axis.</td></tr><tr><td class="line-number" value="342"></td><td class="line-content">  svg.append("g")</td></tr><tr><td class="line-number" value="343"></td><td class="line-content">      .attr("class", "y axis")</td></tr><tr><td class="line-number" value="344"></td><td class="line-content">      .call(yAxis);</td></tr><tr><td class="line-number" value="345"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="346"></td><td class="line-content">  // Add an x-axis label.</td></tr><tr><td class="line-number" value="347"></td><td class="line-content">  svg.append("text")</td></tr><tr><td class="line-number" value="348"></td><td class="line-content">      .attr("class", "x label")</td></tr><tr><td class="line-number" value="349"></td><td class="line-content">      .attr("text-anchor", "end")</td></tr><tr><td class="line-number" value="350"></td><td class="line-content">      .attr("x", width - 6)</td></tr><tr><td class="line-number" value="351"></td><td class="line-content">      .attr("y", height - 6)</td></tr><tr><td class="line-number" value="352"></td><td class="line-content">      .text("income per capita, inflation-adjusted (dollars)");</td></tr><tr><td class="line-number" value="353"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="354"></td><td class="line-content">  // Add a y-axis label.</td></tr><tr><td class="line-number" value="355"></td><td class="line-content">  svg.append("text")</td></tr><tr><td class="line-number" value="356"></td><td class="line-content">      .attr("class", "y label")</td></tr><tr><td class="line-number" value="357"></td><td class="line-content">      .attr("text-anchor", "end")</td></tr><tr><td class="line-number" value="358"></td><td class="line-content">      .attr("x", -6)</td></tr><tr><td class="line-number" value="359"></td><td class="line-content">      .attr("y", 6)</td></tr><tr><td class="line-number" value="360"></td><td class="line-content">      .attr("dy", ".75em")</td></tr><tr><td class="line-number" value="361"></td><td class="line-content">      .attr("transform", "rotate(-90)")</td></tr><tr><td class="line-number" value="362"></td><td class="line-content">      .text("life expectancy (years)");</td></tr><tr><td class="line-number" value="363"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="364"></td><td class="line-content">  // Load the data.</td></tr><tr><td class="line-number" value="365"></td><td class="line-content">  d3.json("nations.json", function(nations) {</td></tr><tr><td class="line-number" value="366"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="367"></td><td class="line-content">    // Add a dot per nation. Initialize the data at 1800, and set the colors.</td></tr><tr><td class="line-number" value="368"></td><td class="line-content">    var dot = svg.append("g")</td></tr><tr><td class="line-number" value="369"></td><td class="line-content">        .attr("class", "dots")</td></tr><tr><td class="line-number" value="370"></td><td class="line-content">      .selectAll(".dot")</td></tr><tr><td class="line-number" value="371"></td><td class="line-content">        .data(nations)</td></tr><tr><td class="line-number" value="372"></td><td class="line-content">      .enter().append("circle")</td></tr><tr><td class="line-number" value="373"></td><td class="line-content">        .attr("class", "dot")</td></tr><tr><td class="line-number" value="374"></td><td class="line-content">        .style("fill", function(d) { return colorScale(color(d)); })</td></tr><tr><td class="line-number" value="375"></td><td class="line-content">        .call(position)</td></tr><tr><td class="line-number" value="376"></td><td class="line-content">        .sort(function(a, b) { return radius(b) - radius(a); });</td></tr><tr><td class="line-number" value="377"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="378"></td><td class="line-content">    // Add a title.</td></tr><tr><td class="line-number" value="379"></td><td class="line-content">    dot.append("title")</td></tr><tr><td class="line-number" value="380"></td><td class="line-content">        .text(function(d) { return d.name; });</td></tr><tr><td class="line-number" value="381"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="382"></td><td class="line-content">    // Positions the dots based on data.</td></tr><tr><td class="line-number" value="383"></td><td class="line-content">    function position(dot) {</td></tr><tr><td class="line-number" value="384"></td><td class="line-content">      dot .attr("cx", function(d) { return xScale(x(d)); })</td></tr><tr><td class="line-number" value="385"></td><td class="line-content">          .attr("cy", function(d) { return yScale(y(d)); })</td></tr><tr><td class="line-number" value="386"></td><td class="line-content">          .attr("r", function(d) { return radiusScale(radius(d)); });</td></tr><tr><td class="line-number" value="387"></td><td class="line-content">    }</td></tr><tr><td class="line-number" value="388"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="389"></td><td class="line-content">    svg.on("mousemove", function() {</td></tr><tr><td class="line-number" value="390"></td><td class="line-content">      var mouse = d3.mouse(this);</td></tr><tr><td class="line-number" value="391"></td><td class="line-content">      xScale.distortion(2.5).focus(mouse[0]);</td></tr><tr><td class="line-number" value="392"></td><td class="line-content">      yScale.distortion(2.5).focus(mouse[1]);</td></tr><tr><td class="line-number" value="393"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="394"></td><td class="line-content">      dot.call(position);</td></tr><tr><td class="line-number" value="395"></td><td class="line-content">      svg.select(".x.axis").call(xAxis);</td></tr><tr><td class="line-number" value="396"></td><td class="line-content">      svg.select(".y.axis").call(yAxis);</td></tr><tr><td class="line-number" value="397"></td><td class="line-content">    });</td></tr><tr><td class="line-number" value="398"></td><td class="line-content">  });</td></tr><tr><td class="line-number" value="399"></td><td class="line-content">})();</td></tr><tr><td class="line-number" value="400"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="401"></td><td class="line-content"><span class="html-tag">&lt;/script&gt;</span></td></tr><tr><td class="line-number" value="402"></td><td class="line-content"><span class="html-tag">&lt;script&gt;</span></td></tr><tr><td class="line-number" value="403"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="404"></td><td class="line-content">GoogleAnalyticsObject = "ga", ga = function() { ga.q.push(arguments); }, ga.q = [], ga.l = +new Date;</td></tr><tr><td class="line-number" value="405"></td><td class="line-content">ga("create", "UA-48272912-3", "ocks.org");</td></tr><tr><td class="line-number" value="406"></td><td class="line-content">ga("send", "pageview");</td></tr><tr><td class="line-number" value="407"></td><td class="line-content"><br></td></tr><tr><td class="line-number" value="408"></td><td class="line-content"><span class="html-tag">&lt;/script&gt;</span></td></tr><tr><td class="line-number" value="409"></td><td class="line-content"><span class="html-tag">&lt;script <span class="html-attribute-name">async</span> <span class="html-attribute-name">src</span>="<a class="html-attribute-value html-resource-link" target="_blank" href="https://www.google-analytics.com/analytics.js">//www.google-analytics.com/analytics.js</a>"&gt;</span><span class="html-tag">&lt;/script&gt;</span></td></tr><tr><td class="line-number" value="410"></td><td class="line-content"><span class="html-end-of-file"></span></td></tr></tbody></table></body></html>